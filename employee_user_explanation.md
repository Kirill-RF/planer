# Связь между пользователем и сотрудником в системе

## Объяснение связи

В системе существует связь между стандартным пользователем Django (User) и сотрудником (Employee). Эта связь реализована через OneToOneField в модели Employee:

```python
class Employee(models.Model):
    full_name = models.CharField(max_length=255, verbose_name="ФИО сотрудника")
    position = models.CharField(max_length=200, blank=True)
    user = models.OneToOneField(User, on_delete=models.CASCADE, null=True, blank=True, verbose_name="Пользователь системы")
```

## Назначение и использование

### Цель связи:
1. **Аутентификация**: Позволяет сотрудникам входить в систему с использованием учетных данных Django User
2. **Авторизация**: Обеспечивает различный уровень доступа для сотрудников и модераторов
3. **Персонализация**: Связывает действия в системе с конкретным сотрудником
4. **Безопасность**: Разделяет права доступа между обычными пользователями и модераторами

### Как использовать:

#### 1. Создание сотрудника с привязкой к пользователю:
```python
# Сначала создается пользователь Django
user = User.objects.create_user(username='employee1', password='password123')

# Затем создается сотрудник и связывается с пользователем
employee = Employee.objects.create(full_name='Иванов Иван', user=user)
```

#### 2. Проверка в представлениях:
```python
# Проверка, является ли пользователь сотрудником
try:
    employee = Employee.objects.get(user=request.user)
    # Пользователь является сотрудником
except Employee.DoesNotExist:
    # Пользователь не связан с сотрудником
```

#### 3. Определение прав доступа:
- Пользователи с `user.is_staff = True` являются модераторами
- Пользователи, связанные с моделью Employee, являются сотрудниками
- Только связанные сотрудники могут создавать фотоотчеты и заполнять анкеты

### Преимущества такой архитектуры:
- Использование встроенной системы аутентификации Django
- Гибкое управление правами доступа
- Возможность расширения информации о сотруднике без изменения User модели
- Простота интеграции с Django Admin

### Пример работы в системе:
1. При входе сотрудника проверяется, связан ли его пользователь с моделью Employee
2. Если связан - предоставляется доступ к сотрудникским функциям
3. Если нет - показывается ошибка аутентификации
4. Модераторы (с `is_staff = True`) получают доступ к административным функциям